(()=>{"use strict";var e,t,n,a,o={299:(e,t,n)=>{n.d(t,{Dp:()=>i,Fd:()=>o,HZ:()=>c,I_:()=>s,ey:()=>r,qn:()=>l,zT:()=>d});var a=n(850);async function o(e,t){try{const n=await fetch(e,t);return n.ok?await n.json():null}catch{return null}}async function s(e){return await o(d(`sessions/${e}`,"8080"))??{robotID:`${e} (${a.p.getString("notActive")})`,players:[],tasks:[],helpEnabled:!1}}async function i(e,t){console.log(`${e} ${t}`),await o(d(`sessions/${e}/feedback`,"8080"),{method:"PUT",body:t})}async function r(e,t,n){var a=Object();return a.key=t,a.completed=n,await o(d(`sessions/${e}/tasks`,"8080"),{method:"PUT",body:JSON.stringify(a)})}async function c(e,t){var n=Object();return n.Value=t,await o(d(`sessions/${e}/helpEnabled`,"8080"),{method:"PUT",body:JSON.stringify(n)})}function l(e){return new URLSearchParams(window.location.search).get(e)}function d(e,t,n=window.location.protocol){return`${n}//${window.location.hostname}:${t}/${e}`}},321:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var a=n(299),o=n(515),s=n(850);const c=(0,a.qn)("robotID"),l=document.getElementById("pageHeader"),d=document.getElementById("userNameText"),u=document.getElementById("helpText"),p=document.getElementById("HelpList");var i,r={robotID:"null",players:[],tasks:[],helpEnabled:!1};async function m(){return await(0,a.I_)(c??"null")}async function h(){i=r,r=await m(),f(),g(),v(),y()}function f(){if(l&&d)if(l.innerHTML=r.robotID,0==r.players.length)d.innerHTML="No players are here",s.p.setLocalisationKey(d,"noPlayers");else{const e=r.players.map((e=>e.name)).join(", ");d.innerHTML=e,s.p.removeLocalisationKey(d)}else console.error('Element with ID "pageHeader" not found or Robot ID not found in query parameters.')}function y(){var e=[],t=[];const n=document.getElementById("UserList");if(!n)return void console.error('Element with ID "UserList" not found.');const o=document.createElement("div");o.className="textHolder";const i=document.createElement("p");i.textContent="Upon selecting desired user a new window will get open, where you can control the user controls",s.p.setLocalisationKey(i,"changeUserSettingsDescription");const c=document.createElement("h4");c.textContent="Change individual user settings: ",s.p.setLocalisationKey(c,"changeUserSettingsHeadline"),o.replaceChildren(c,i),e.push(o);const l=document.createElement("div");l.classList.add("mainContent","wrapContainer"),r.players.forEach((e=>{const n=document.createElement("a");n.href=(0,a.zT)(`controller.html?robotID=${encodeURIComponent(r.robotID)}&overrideIndex=${encodeURIComponent(r.players.indexOf(e))}`,"8081","http:"),n.classList.add("card","groupCard","userCard");const o=document.createElement("div");n.replaceChildren(o);const s=document.createElement("h4");s.textContent=e.name,s.style.textAlign="center",o.replaceChildren(s),t.push(n)})),l.replaceChildren(...t),e.push(l),n.replaceChildren(...e)}async function g(){let e=r.tasks;const t=document.getElementById("TaskList");if(!t)return void console.error('Element with ID "TaskList" not found.');var n=[];const a=document.createElement("h2");if(a.textContent="Task List",s.p.setLocalisationKey(a,"taskList"),n.push(a),0==e.length){const e=document.createElement("h3");return e.textContent="There are no tasks set for this session",s.p.setLocalisationKey(e,"noTasks"),n.push(e),void t.replaceChildren(...n)}let o={};for(const e of r.tasks){o[e.key]=e.strings;const t=document.createElement("div");t.classList.add("taskDiv");const a=document.createElement("div");a.style.marginRight="2%";const i=document.createElement("input");i.type="checkbox",i.id=e.key,i.checked=e.completed,a.appendChild(i);const r=document.createElement("p");r.textContent=e.strings.en,s.p.setLocalisationKey(r,e.key),t.replaceChildren(i,r),n.push(t),i.addEventListener("change",L)}t.replaceChildren(...n),s.p.addNamedBanks({BankName:"tasks",Bank:o})}function L(e){var t=e.target;(0,a.ey)(c??"null",t.id,t.checked)}function k(){let e=document.querySelector("#switch input");e instanceof HTMLInputElement&&e.addEventListener("change",E)}async function E(e){r.robotID.endsWith(")")?e.target.checked=!1:(r.helpEnabled=e.target.checked,(0,a.HZ)(c??"null",r.helpEnabled),v(!0))}function v(e=!1){{let e=document.querySelector("#switch input");e instanceof HTMLInputElement&&(e.checked=r.helpEnabled)}if(p&&u)if(r.helpEnabled){const t=r.players.length,n=r.players.filter((e=>e.HelpRequested)).length;u.innerHTML=`${n} / ${t} players need help`,s.p.setLocalisationKey(u,"needsHelp",{numberOfHelpRequests:n,maxPlayers:t}),(e||r.helpEnabled!=i.helpEnabled)&&(0,o.h)()}else{p.innerHTML="",u.innerHTML="",s.p.removeLocalisationKey(u);for(const e of r.players)e.HelpRequested=!1}}await s.p.loadLocalisationBanks("/strings/common.json","/strings/individualGroups.json"),k(),await h(),setInterval(h,5e3),t()}catch(b){t(b)}}),1)},515:(e,t,n)=>{n.d(t,{h:()=>c});var a=n(299),o=n(850);let s,i=(0,a.qn)("robotID"),r=[];async function c(){const e=await(0,a.Fd)("help.json")??[],t=document.getElementById("HelpList");if(!t)return void console.error('Element with ID "TaskList" not found.');t.innerHTML="";const n=[];var i=document.createElement("div");i.style.marginTop="1em",n.push(i);const p=e.map((e=>l(e.trim())));n.push(...p),function(){const e=localStorage.getItem("help");e&&(r=JSON.parse(e))}();const m=r.map((e=>function(e){const t=l(e),n=document.createElement("i");return n.className="textBoxIcon fa-solid fa-minus minusIcon",n.addEventListener("click",d),t.appendChild(n),t}(e.trim())));n.push(...m),n.push(function(){if(s)return s;s=document.createElement("div"),s.classList.add("textBox");const e=document.createElement("input");e.classList.add("textBoxInput"),e.placeholder="Type personalized help here...",o.p.setLocalisationKey(e,"typePersonalizedHelp"),s.appendChild(e);const t=document.createElement("i");return t.classList.add("textBoxIcon","fa-solid","fa-plus"),t.addEventListener("click",(t=>function(e){e.value.trim().length<=0?console.log("No text!"):(r.push(e.value),e.value="",u(),c())}(e))),s.appendChild(t),s}()),t.replaceChildren(...n)}function l(e){const t=document.createElement("div");t.classList.add("card","helpButton"),t.id=e;const n=document.createElement("span");return n.className="helpText",n.textContent=e,n.id=e,t.appendChild(n),t.addEventListener("click",p),t}function d(e){const t=e.target.parentElement;r=r.filter((e=>e!=t.id)),u(),c(),e.stopPropagation(),e.preventDefault()}function u(){localStorage.setItem("help",JSON.stringify(r))}function p(e){const t=e.target;console.log(`button with ID ${t.id} is was sent for Edmo Group: ${i}`),(0,a.Dp)(i??"null",t.id)}},850:(e,t,n)=>{n.d(t,{p:()=>o});var a=n(299);class o{static localisationBanks=[];static namedBanks={};static currentLanguage="nl";static{this.currentLanguage=localStorage.getItem("language")??"nl"}static async loadLocalisationBanks(...e){for(const t of e){const e=await(0,a.Fd)(t);if(!e)return;this.localisationBanks.push(e)}this.applyLocalisationToAllElements()}static addLocalisationBanks(...e){for(const t of e)this.localisationBanks.push(t);this.applyLocalisationToAllElements()}static async loadNamedBanks(...e){for(const t of e){const e=await(0,a.Fd)(t.URI);if(!e)return;this.namedBanks[t.BankName]=e}this.applyLocalisationToAllElements()}static addNamedBanks(...e){for(const t of e)this.namedBanks[t.BankName]=t.Bank;this.applyLocalisationToAllElements()}static clearLocalisationBanks(){this.localisationBanks=[],this.namedBanks={}}static async unloadNamedBanks(e){delete this.namedBanks[e]}static get CurrentLanguage(){return this.currentLanguage}static getString(e,t=null){const n=this.localisationBanks.concat(Object.values(this.namedBanks));for(const a of n){if(!(e in a))continue;const n=a[e];if(this.currentLanguage in n)return this.format(n[this.currentLanguage],t)}const a=`Can't find string with key {${e}} for language code {${this.currentLanguage}}`;return console.log(a),""}static findAllLocalizableElements(){return document.querySelectorAll("[data-i18n-key]")}static setLocalisationKey(e,t,n=null){e.setAttribute("data-i18n-key",t),n&&e.setAttribute("data-i18n-args",JSON.stringify(n)),this.applyLocalisation(e)}static removeLocalisationKey(e){e.removeAttribute("data-i18n-key"),e.removeAttribute("data-i18n-args")}static setLanguage(e){this.currentLanguage=e,localStorage.setItem("language",e),this.applyLocalisationToAllElements()}static applyLocalisation(e){const t=e.getAttribute("data-i18n-key"),n=e.getAttribute("data-i18n-args"),a=n?JSON.parse(n):null;if(!t)return;const o=this.getString(t,a);e instanceof HTMLInputElement?e.placeholder=o:e.innerText=o}static applyLocalisationToAllElements(){const e=this.findAllLocalizableElements();for(const t of e)t instanceof HTMLElement&&this.applyLocalisation(t)}static format(e,t=null){return t?e.replace(/\{\{|\}\}|\{(\w+)\}/g,(function(e,n){return"{{"==e?"{":"}}"==e?"}":n in t?t[n]:`{${n}}`})):e}}}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return o[e](n,n.exports,i),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},i.a=(o,s,i)=>{var r;i&&((r=[]).d=-1);var c,l,d,u=new Set,p=o.exports,m=new Promise(((e,t)=>{d=t,l=e}));m[t]=p,m[e]=e=>(r&&e(r),u.forEach(e),m.catch((e=>{}))),o.exports=m,s((o=>{var s;c=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var s=[];s.d=0,o.then((e=>{i[t]=e,a(s)}),(e=>{i[n]=e,a(s)}));var i={};return i[e]=e=>e(s),i}}var r={};return r[e]=e=>{},r[t]=o,r})))(o);var i=()=>c.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(s=()=>t(i)).r=0;var n=e=>e!==r&&!u.has(e)&&(u.add(e),e&&!e.d&&(s.r++,e.push(s)));c.map((t=>t[e](n)))}));return s.r?l:i()}),(e=>(e?d(m[n]=e):l(p),a(r)))),r&&r.d<0&&(r.d=0)},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(321)})();